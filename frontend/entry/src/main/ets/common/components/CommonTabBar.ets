import router from '@ohos.router';
import { TabItem } from '../../mode/type';
@Component
export struct CommonTabBar {
  @Prop currentIndex: number;

  // å¯¼èˆªé¡¹å®šä¹‰ - ç®€åŒ–ä¸ºé¦–é¡µå’Œä¸ªäººä¸­å¿ƒä¸¤ä¸ªæŒ‰é’®
  private tabItems: TabItem[] = [
    {
      icon: 'ğŸ›ï¸',
      iconSelected: 'ğŸ›ï¸',
      text: 'é¦–é¡µ',
      route: 'pages/MainPage'
    },
    {
      icon: 'ğŸ›ï¸',
      iconSelected: 'ğŸ›ï¸',
      text: 'æ–‡ç‰©åˆ—è¡¨',
      route: 'pages/ArtifactListPage'
    },
    {
      icon: 'ğŸ‘¤',
      iconSelected: 'ğŸ‘¤',
      text: 'ä¸ªäººä¸­å¿ƒ',
      route: 'pages/ProfilePage'
    }
  ];

  build() {
    Column() {
      Row() {
        ForEach(this.tabItems, (item: TabItem, index: number) => {
          Column() {
            Text(this.currentIndex === index ? item.iconSelected : item.icon)  // æ ¹æ®é€‰ä¸­çŠ¶æ€åˆ‡æ¢å›¾æ ‡
              .fontColor(this.currentIndex === index ? '#4E86FF' : '#999999')
              .fontSize(22)
            Text(item.text)
              .fontColor(this.currentIndex === index ? '#4E86FF' : '#999999')
              .fontSize(12)
              .margin({ top: 4 })
          }
          .width('33.3%')  // æ¯ä¸ªæŒ‰é’®å ç”¨33.3%çš„å®½åº¦
          .height('100%')
          .justifyContent(FlexAlign.Center)
          .onClick(() => {
            if (this.currentIndex === index) {
              return;  // é¿å…é‡å¤å¯¼èˆªåˆ°å½“å‰é¡µé¢
            }

            console.info(`å‡†å¤‡è·³è½¬åˆ°: ${item.route}`);

            router.replaceUrl({
              url: item.route,
              params: {}  // æ·»åŠ ç©ºå‚æ•°å¯¹è±¡
            }, (err) => {
              if (err) {
                console.error(`å¯¼èˆªåˆ°${item.text}å¤±è´¥: ${JSON.stringify(err)}`);
              } else {
                console.info(`æˆåŠŸå¯¼èˆªåˆ°${item.text}`);
              }
            });
          })
        })
      }
      .width('100%')
      .height(60)
      .backgroundColor(Color.White)
    }
    .width('100%')
    .height(60)
    .border({ width: { top: 1 }, color: '#EEEEEE' })
  }
}